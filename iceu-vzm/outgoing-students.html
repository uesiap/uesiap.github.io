<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Details for OUTGOING STUDENTS Follow-Up</title>
    <meta name="title" content="Details for OUTGOING STUDENTS Follow-Up">
    <meta name="description"
        content="Easy Forms - Created by Rahul">

    <link rel="canonical" href="https://uesiap.github.io/au-zone/eu/outgoing-students" />

    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://uesiap.github.io/form">
    <meta property="og:title" content="Details for OUTGOING STUDENTS Follow-Up">
    <meta property="og:description"
        content="Easy Forms - Created by Rahul">
    <meta property="og:imag" content="https://i.postimg.cc/zvpPNWKr/easyformsbyrahulogo.jpg">

    <!-- Twitter -->
    <meta property="twitter:card" content="https://i.ibb.co/PGWLtMPc/easyformsbyrahulogo.jpg">
    <meta property="twitter:url" content="https://uesiap.github.io/form">
    <meta property="twitter:title" content="Details for OUTGOING STUDENTS Follow-Up">
    <meta property="twitter:description"
        content="Easy Forms - Created by Rahul">
    <meta property="twitter:image" content="https://i.postimg.cc/zvpPNWKr/easyformsbyrahulogo.jpg">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@3.0.10/dist/tailwind.min.css" rel="stylesheet">
    <script src="https://kit.fontawesome.com/6ff5af2422.js" crossorigin="anonymous"></script>
    <link href="https://fonts.googleapis.com/css2?family=Google+Sans:wght@400;500;700&display=swap" rel="stylesheet">
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-storage-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>

    <style>
        body {
            font-family: 'Google Sans', sans-serif;
            background-color: #f5f7fa;
        }

        .preview-image {
            width: 100%;
            height: 200px;
        }

        .container {
            margin-top: 40px;
            margin-left: auto;
            margin-right: auto;
            background-color: #fff;
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.1);
            max-width: 800px;
        }

        .card-title {
            color: #1a56db;
            font-size: 1rem;
            font-weight: 700;
            margin-bottom: 1.5rem;
            text-align: center;
            padding-bottom: 10px;
            border-bottom: 2px solid #e5e7eb;
        }

        .form-label {
            color: #3b82f6;
            font-weight: 500;
        }

        .form-control,
        .form-select {
            border-radius: 8px;
            padding: 10px 15px;
            border: 1px solid #d1d5db;
            transition: all 0.3s ease;
        }

        .form-control:focus,
        .form-select:focus {
            border-color: #3b82f6;
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.25);
        }

        .btn-primary {
            background-color: #1d4ed8;
            border: none;
            border-radius: 8px;
            padding: 12px 20px;
            font-weight: 500;
            transition: all 0.3s ease;
        }

        .btn-primary:hover {
            background-color: #1e40af;
            transform: translateY(-2px);
        }

        .section-heading {
            font-weight: 600;
            color: #374151;
            margin-top: 20px;
            margin-bottom: 15px;
            padding-bottom: 8px;
            border-bottom: 1px solid #e5e7eb;
        }

        /* Loader Styles */
        #loaderContainer {
            display: none;
            position: fixed;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.6);
            z-index: 9999;
            backdrop-filter: blur(5px);
        }

        #loader {
            position: absolute;
            left: 50%;
            top: 50%;
            transform: translate(-50%, -50%);
            color: white;
            text-align: center;
        }

        #loader .spinner {
            border: 5px solid rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            border-top: 5px solid #fff;
            width: 50px;
            height: 50px;
            margin: 0 auto 20px;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% {
                transform: rotate(0deg);
            }

            100% {
                transform: rotate(360deg);
            }
        }

        .success-icon {
            font-size: 50px;
            color: #10B981;
            margin-bottom: 15px;
        }

        footer {
            margin: 30px auto;
            width: 100%;
            max-width: 800px;
            background-color: #fff;
            color: #333;
            text-align: center;
            padding: 15px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
        }

        footer a {
            color: #3b82f6;
            text-decoration: none;
            font-weight: 500;
        }

        footer a:hover {
            text-decoration: underline;
        }
    </style>
</head>

<body>
    <div class="container mx-auto">
        <h2 class="card-title">Details for OUTGOING STUDENTS Follow-Up</h2>
        <form id="uploadForm">
            <h4 class="section-heading">Personal Information</h4>
            <div class="row mb-3">
                <div class="col-md-8">
                    <label for="stdName" class="form-label">Name of the Student:</label>
                    <input type="text" class="form-control" id="stdName" name="stdName"
                        placeholder="Enter your full name" required>
                </div>
                &emsp;
                <div class="col-md-4">
                    <label for="gender" class="form-label">Gender:</label>
                    <select class="form-select" id="gender" name="gender" required>
                        <option value="" disabled selected>Choose Gender</option>
                        <option value="Male">Male</option>
                        <option value="Female">Female</option>
                    </select>
                </div>
            </div>

            <div class="mb-3">
                <label for="nativePlace" class="form-label">Native Place/Permanent Address:</label>
                <textarea class="form-control" id="nativePlace" name="nativePlace" rows="3"
                    placeholder="Enter your village, district, state" required></textarea>
            </div>

            <div class="row mb-3">
                <div class="col-md-6">
                    <label for="phoneNo" class="form-label">Phone No:</label>
                    <input type="tel" class="form-control" id="phoneNo" name="phoneNo"
                        placeholder="Enter your mobile number" required>
                </div>&emsp;
                <div class="col-md-6">
                    <label for="emailId" class="form-label">Email Id:</label>
                    <input type="email" class="form-control" id="emailId" name="emailId"
                        placeholder="Enter your email address" required>
                </div>
            </div>

            <div class="row mb-3">
                <div class="col-md-6">
                    <label for="dob" class="form-label">Date of Birth:</label>
                    <input type="date" class="form-control" id="dob" name="dob" required>
                </div>
                &emsp;
                <div class="col-md-6">
                    <label for="bornAgainDate" class="form-label">Born Again Date:</label>
                    <input type="date" class="form-control" id="bornAgainDate" name="bornAgainDate" required>
                </div>
            </div>

            <h4 class="section-heading">Academic Information</h4>
            <div class="row mb-3">
                <div class="col-md-6">
                    <label for="course" class="form-label">Course Completed:</label>
                    <input type="text" class="form-control" id="course" name="course"
                        placeholder="Enter your course/degree" required>
                </div>&emsp;
                <div class="col-md-6">
                    <label for="college" class="form-label">College:</label>
                    <input type="text" class="form-control" id="college" name="college"
                        placeholder="Enter your college name" required>
                </div>
            </div>

            <div class="mb-3">
                <label class="form-label">Batch:</label>
                <div class="row">
                    <div class="col-md-12 d-flex">
                        <div class="input-group me-2" style="flex: 1;">
                            <select class="form-select" id="batchStartYear" name="batchStartYear" required>
                                <option value="" disabled selected>From</option>
                                <option value="2016">2016</option>
                                <option value="2017">2017</option>
                                <option value="2018">2018</option>
                                <option value="2019">2019</option>
                                <option value="2020">2020</option>
                                <option value="2021">2021</option>
                                <option value="2022">2022</option>
                                <option value="2023">2023</option>
                                <option value="2024">2024</option>
                            </select>
                        </div>
                        &ensp;<h6 style="color: grey; margin-top: 7px;">To</h6>&emsp;
                        <div class="input-group" style="flex: 1;">
                            <select class="form-select" id="batchEndYear" name="batchEndYear" required>
                                <option value="" disabled selected>To</option>
                                <option value="2022">2022</option>
                                <option value="2023">2023</option>
                                <option value="2024">2024</option>
                                <option value="2025">2025</option>
                            </select>
                        </div>
                    </div>
                </div>
            </div>

            <div class="mb-4">
                <label for="photoUpload" class="form-label">Passport Size Photo:</label>
                <input type="file" name="photoUpload" id="photoUpload" class="form-control" required accept="image/*">
                <div class="form-text text-muted">Upload a recent passport size photograph (JPEG or PNG format).</div>
            </div>

            <div class="d-grid gap-2 col-6 mx-auto mt-4">
                <button type="submit" class="btn btn-primary btn-lg">Submit</button>
            </div>
        </form>

        <div id="successMessage" style="display: none; margin-top: 20px; text-align: center;">
            <div class="alert alert-success" role="alert">
                <i class="fas fa-check-circle success-icon"></i>
                <h4 class="alert-heading">Submission Successful!</h4>
                <p>Your details have been submitted successfully. Thank you!</p>
            </div>
        </div>
    </div>

    <footer>
        <p style="margin: 0; font-family: 'Google Sans', sans-serif; font-size: 15px;">Â© Designed with <i
                class="fas fa-heart" style="color: #e74c3c;"></i> by <strong><a
                    href="https://rahul.serv00.net/profile">Rahul</a></strong>&ensp;</p>
    </footer>

    <div id="loaderContainer">
        <div id="loader">
            <div class="spinner"></div>
            <p>Submitting your information...</p>
        </div>
    </div>

    <script>
        // Firebase configuration
        const firebaseConfig = {
            apiKey: "AIzaSyAaQdWKBdtqqe3pu9XDdPoFuvcEm2YG_wA",
            authDomain: "melam-rahul.firebaseapp.com",
            projectId: "melam-rahul",
            storageBucket: "melam-rahul.appspot.com",
            messagingSenderId: "742315739002",
            appId: "1:742315739002:web:329ea957fa38f66ab078c3",
            measurementId: "G-SCNKZYJ3TT"
        };

        // Initialize Firebase
        firebase.initializeApp(firebaseConfig);
        const storage = firebase.storage();
        const db = firebase.database();

        document.getElementById('uploadForm').addEventListener('submit', async (event) => {
            event.preventDefault();

            // Show loader
            document.getElementById('loaderContainer').style.display = 'block';

            // Get form data
            const formData = new FormData(event.target);
            const stdName = formData.get('stdName');
            const gender = formData.get('gender');
            const nativePlace = formData.get('nativePlace');
            const phoneNo = formData.get('phoneNo');
            const emailId = formData.get('emailId');
            const dob = formData.get('dob');
            const bornAgainDate = formData.get('bornAgainDate');
            const course = formData.get('course');
            const college = formData.get('college');
            const batchStartYear = formData.get('batchStartYear');
            const batchEndYear = formData.get('batchEndYear');
            const batch = `${batchStartYear}-${batchEndYear}`;

            const photoFile = document.getElementById('photoUpload').files[0];

            const photoStorageRef = storage.ref(`iceuvzm/${stdName}/${photoFile.name}`);

            try {
                // Upload photo
                const photoUploadTask = photoStorageRef.put(photoFile);

                await photoUploadTask;

                const photoURL = await photoStorageRef.getDownloadURL();

                // Save data to Firebase Realtime Database
                const studentData = {
                    stdName,
                    gender,
                    nativePlace,
                    phoneNo,
                    emailId,
                    dob,
                    bornAgainDate,
                    course,
                    college,
                    batchStartYear,
                    batchEndYear,
                    batch,
                    photoURL,
                    submittedAt: new Date().toISOString()
                };

                await db.ref('iceuvzm').push(studentData);

                // Show success message
                document.getElementById('successMessage').style.display = 'block';
                document.getElementById('uploadForm').style.display = 'none';

                // Reset form
                event.target.reset();
            } catch (error) {
                console.error("Error uploading files or saving data: ", error);
                alert("An error occurred while uploading. Please try again.");
            } finally {
                // Hide loader
                document.getElementById('loaderContainer').style.display = 'none';
            }
        });
    </script>
</body>

</html>
